machine:
  services:
    - docker

dependencies:
  override:
  pre:
  - mvn clean install
  post:
  - docker build -t manlulu/circle .
  


deployment:
  hub:
    branch: master
    commands:

      - docker login -e $kim.flaethe@accenture.com -u manlulu -p $DOCKER_PASS
      - docker push manlulu/circle
    codedeploy:
      appname-1234:
        application_root: /
        region: us-east-1
        revision_location:
          revision_type: S3
          s3_location:
            bucket: my-bucket
            key_pattern: appname-1234-{BRANCH}-{SHORT_COMMIT}
        deployment_group: my-deployment-group